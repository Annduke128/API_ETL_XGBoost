# ============================================================
# C·∫§U H√åNH EMAIL NOTIFIER CHO ML PIPELINE - TEMPLATE
# ============================================================
# ƒê√¢y l√† file template. Copy th√†nh email_config.yaml v√† ch·ªânh s·ª≠a.
# 
# ‚ö†Ô∏è QUAN TR·ªåNG: KH√îNG commit email_config.yaml l√™n Git!
# File email_config.yaml ƒë√£ ƒë∆∞·ª£c th√™m v√†o .gitignore
# ============================================================

# -------------------------------------------------
# DANH S√ÅCH NG∆Ø·ªúI NH·∫¨N B√ÅO C√ÅO THEO LO·∫†I
# -------------------------------------------------
# 
# üìß C·∫§U H√åNH PH√ÇN QUY·ªÄN:
# M·ªói lo·∫°i b√°o c√°o c√≥ th·ªÉ g·ª≠i ƒë·∫øn danh s√°ch email ri√™ng
# 
# training_report: Ng∆∞·ªù i nh·∫≠n b√°o c√°o k·∫øt qu·∫£ hu·∫•n luy·ªán model
# forecast_report: Ng∆∞·ªù i nh·∫≠n b√°o c√°o d·ª± b√°o & khuy·∫øn ngh·ªã t·ªìn kho  
# error_alert:     Ng∆∞·ªù i nh·∫≠n th√¥ng b√°o khi c√≥ l·ªói
#
# üí° V√≠ d·ª•:
#   - Data Scientist ‚Üí training_report (xem model performance)
#   - Sales Manager  ‚Üí forecast_report (xem d·ª± b√°o doanh s·ªë)
#   - IT Admin       ‚Üí error_alert (x·ª≠ l√Ω l·ªói h·ªá th·ªëng)
# -------------------------------------------------

recipients:
  # ==========================================
  # PH√ÇN QUY·ªÄN THEO LO·∫†I B√ÅO C√ÅO
  # ==========================================
  by_report_type:
    
    # üìä TRAINING REPORT - K·∫øt qu·∫£ hu·∫•n luy·ªán model
    # Ng∆∞·ªù i nh·∫≠n: Data Scientist, ML Engineer, Tech Lead
    # N·ªôi dung: Model metrics, hyperparameters, feature importance
    training_report:
      - "your-email@company.com"  # ‚Üê Thay b·∫±ng email th·∫≠t
      # - "ml-engineer@company.com"
      # - "tech-lead@company.com"
    
    # üîÆ FORECAST REPORT - D·ª± b√°o & T·ªìn kho
    # Ng∆∞·ªù i nh·∫≠n: Sales Manager, Inventory Team, Business Owner
    # N·ªôi dung: D·ª± b√°o doanh s·ªë, xu h∆∞·ªõng s·∫£n ph·∫©m, khuy·∫øn ngh·ªã t·ªìn kho
    forecast_report:
      - "sales-manager@company.com"  # ‚Üê Thay b·∫±ng email th·∫≠t
      # - "inventory@company.com"
      # - "ceo@company.com"
    
    # ‚ö†Ô∏è ERROR ALERT - Th√¥ng b√°o l·ªói
    # Ng∆∞·ªù i nh·∫≠n: DevOps, IT Admin, Data Engineer
    # N·ªôi dung: Chi ti·∫øt l·ªói, stack trace, ng·ªØ c·∫£nh
    error_alert:
      - "devops@company.com"  # ‚Üê Thay b·∫±ng email th·∫≠t
      # - "it-admin@company.com"

# -------------------------------------------------
# C·∫§U H√åNH LO·∫†I B√ÅO C√ÅO
# -------------------------------------------------
# B·∫≠t/t·∫Øt t·ª´ng lo·∫°i th√¥ng b√°o v√† t√πy ch·ªânh ti√™u ƒë·ªÅ

notifications:
  # ==========================================
  # TRAINING REPORT
  # ==========================================
  # G·ª≠i sau m·ªói l·∫ßn training ho√†n t·∫•t
  # Cho bi·∫øt: Model c√≥ ho·∫°t ƒë·ªông t·ªët kh√¥ng? C·∫ßn ƒëi·ªÅu ch·ªânh g√¨?
  #
  training_report:
    enabled: true
    subject_prefix: "[ML Training] K·∫øt qu·∫£ hu·∫•n luy·ªán"
    
  # ==========================================
  # FORECAST REPORT
  # ==========================================
  # G·ª≠i sau khi generate forecasts
  # Cho bi·∫øt: Xu h∆∞·ªõng b√°n h√†ng, s·∫£n ph·∫©m hot, c·∫£nh b√°o t·ªìn kho
  #
  forecast_report:
    enabled: true
    subject_prefix: "[ML Forecast] B√°o c√°o d·ª± b√°o & T·ªìn kho"
    
  # ==========================================
  # ERROR ALERT
  # ==========================================
  # G·ª≠i khi c√≥ l·ªói x·∫£y ra trong pipeline
  # Cho bi·∫øt: C√≥ v·∫•n ƒë·ªÅ g√¨ c·∫ßn x·ª≠ l√Ω ngay
  #
  error_alert:
    enabled: true
    subject_prefix: "[ML Pipeline] C·∫¢NH B√ÅO L·ªñI"

# -------------------------------------------------
# C·∫§U H√åNH N·ªòI DUNG B√ÅO C√ÅO
# -------------------------------------------------

content:
  # S·ªë s·∫£n ph·∫©m xu h∆∞·ªõng h√†ng ƒë·∫ßu hi·ªÉn th·ªã trong b√°o c√°o
  top_trending_products: 10
  
  # S·ªë s·∫£n ph·∫©m c·∫ßn ch√∫ √Ω t·ªìn kho
  top_inventory_alerts: 10
  
  # ƒê·ªãnh d·∫°ng ng√†y th√°ng
  date_format: "%d/%m/%Y %H:%M"
  
  # M√∫i gi·ªù
  timezone: "Asia/Ho_Chi_Minh"
  
  # Ng√¥n ng·ªØ b√°o c√°o (vi/en)
  language: "vi"

# -------------------------------------------------
# C·∫§U H√åNH G·ª¨I EMAIL (SMTP)
# -------------------------------------------------
# ‚ö†Ô∏è L∆ØU √ù B·∫¢O M·∫¨T:
# - Kh√¥ng l∆∞u password tr·ª±c ti·∫øp trong file n√†y
# - S·ª≠ d·ª•ng bi·∫øn m√¥i tr∆∞·ªùng ho·∫∑c App Password trong .env
# 
# ƒê·ªÉ s·ª≠ d·ª•ng Gmail:
# 1. B·∫≠t 2-Factor Authentication
# 2. T·∫°o App Password t·∫°i: https://myaccount.google.com/apppasswords
# 3. Copy App Password v√†o bi·∫øn m√¥i tr∆∞·ªùng EMAIL_PASSWORD trong file .env

smtp:
  # Server SMTP (Gmail)
  server: "smtp.gmail.com"
  port: 587
  use_tls: true
  
  # T√†i kho·∫£n g·ª≠i email
  # N√™n s·ª≠ d·ª•ng email ri√™ng cho h·ªá th·ªëng (v√≠ d·ª•: ml-pipeline@company.com)
  # C√≥ th·ªÉ d√πng bi·∫øn m√¥i tr∆∞·ªùng: ${EMAIL_SENDER:-default@company.com}
  sender_email: "${EMAIL_SENDER:-ml-pipeline@company.com}"
  
  # T√™n ng∆∞·ªù i g·ª≠i hi·ªÉn th·ªã trong email
  sender_name: "ML Pipeline System"

# -------------------------------------------------
# C·∫§U H√åNH N√ÇNG CAO
# -------------------------------------------------

advanced:
  # Th·ªù i gian ch·ªù k·∫øt n·ªëi SMTP (gi√¢y)
  timeout: 30
  
  # S·ªë l·∫ßn th·ª≠ l·∫°i khi g·ª≠i th·∫•t b·∫°i
  retry_attempts: 3
  
  # Th·ªù i gian ch·ªù gi·ªØa c√°c l·∫ßn th·ª≠ l·∫°i (gi√¢y)
  retry_delay: 5
  
  # ƒê√≠nh k√®m file metrics.json trong email training
  attach_metrics_file: true
  
  # ƒê√≠nh k√®m file forecasts.csv trong email forecast
  attach_forecasts_file: true
